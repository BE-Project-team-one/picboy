## ****<img src="https://user-images.githubusercontent.com/98306332/193814380-e6746850-09d1-405f-b65c-d278a19c64c8.png" width="200" margin="auto"/>🎨다 함께 움짤만들기✍️****
<img src="https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/%ED%83%80%EC%9D%B4%ED%8B%80.gif" width="1200" margin="auto"/>

## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/> 프로젝트 소개****
- 저희가 기획한 PICBOY는 릴레이로 이어 그린다는 재미에 착안점을 두고 개발 되었습니다.<br>
- 한사람이 의미없이 그린 그림에 누군가 다음 과정을 예측,상상하여 이어 그려나가 말도안되는 상황 풀이나, 절묘하게 잘 맞아 떨어지는 연계에서 오는 재미를 느낄수 있습니다.!
<br>

👾[PICBOY 바로가기](http://www.naver.com/)

## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  바로가기****

📍[FRONT GIT 바로가기](https://github.com/BE-Project-team-one/picboy-FE/) <br />
📍[BACK GIT 바로가기](https://github.com/BE-Project-team-one/picboy/) <br />
📍[TEAM NOTION 바로가기](https://www.notion.so/PicBoy-a564484c040c42d0bd554059f135c6b5/)


## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  프로젝트 기간****

- 2022.08.26 ~ 2022.10.06

## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  팀 구성****

<table>
   <tr>
    <td align="center"><b><a href="https://github.com/dongkeon-lee">이동건</a></b></td>
    <td align="center"><b><a href="https://github.com/yalla12">신선호</a></b></td>
          <td align="center"><b><a href="https://github.com/JangChangKyoon">장창균</a></b></td>
     <td align="center"><b><a href="https://github.com/woojangsan">정용욱</a></b></td>
    <td align="center"><b><a href="https://github.com/bita5000">조다솜</a></b></td>
    <td align="center"><b><a href="https://github.com/minimi61">정민희</a></b></td>
    <td align="center"><b><a href="https://github.com/Jhoon2">우종훈</a></b></td>
    <td align="center"><b><a href="https://www.behance.net/df6c1531">김나영</a></b></td>
  </tr>
  <tr>
     <td align="center"><a href="https://github.com/dongkeon-lee"><img src="https://user-images.githubusercontent.com/98306332/193821902-f4c264e2-de86-4e4b-a2b6-a65d391ca740.gif" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/yalla12"><img src="https://user-images.githubusercontent.com/98306332/193821957-d2e62bfd-3aca-4f0e-a947-b27ca075f711.gif" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/JangChangKyoon"><img src="https://avatars.githubusercontent.com/u/97339665?v=4" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/woojangsan"><img src="https://user-images.githubusercontent.com/98306332/193821792-975ebf26-cf03-4693-a303-ee9ea70347f9.gif" width="100px" /></a></td>
    <td align="center"><a href="https://github.com/bita5000"><img src="https://user-images.githubusercontent.com/98306332/193821434-75d601e9-14f6-4d21-ba0e-edd0e01ee670.gif" width="100px" /></a></td>
    <td align="center"><a href="https://github.com/minimi61"><img src="https://user-images.githubusercontent.com/98306332/193821730-45beb191-b8cd-4eaa-be39-0779ae9b07b5.gif" width="100px" /></a></td>
    <td align="center"><a href="https://github.com/Jhoon2"><img src="https://user-images.githubusercontent.com/98306332/193822060-a37d5382-93a7-4b31-964f-d8a6196015bc.gif" width="100px" /></a></td>
    <td align="center"><a href="https://www.behance.net/df6c1531"><img src="https://user-images.githubusercontent.com/98306332/193822117-5cfb38c9-88f2-45e3-8b83-159edc012f8b.gif" width="100px" /></a></td>
    
  </tr>
  <tr>
     <td align="center"><b>(L)Backend</b></td>
    <td align="center"><b>Backend</b></td>
    <td align="center"><b>Backend</b></td>     
    <td align="center"><b>Backend</b></td>
    <td align="center"><b>(VL)FrontEnd</b></td>
    <td align="center"><b>FrontEnd</b></td>
    <td align="center"><b>FrontEnd</b></td>
    <td align="center"><b>Design</b></td>
  </tr>
</table>


## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  주요기술****


<div align=center> 
<img src="https://img.shields.io/badge/spring-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white"> <img src= "https://img.shields.io/badge/Springboot-6DB33F?style=for-the-badge&logo=Springboot&logoColor=white"> <img src="https://img.shields.io/badge/spring security-6db33f?style=for-the-badge&logo=springsecurity&logoColor=white">  <img src= "https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white"> <img src="https://img.shields.io/badge/JWT-02303A?style=for-the-badge&logo=jwt&logoColor=white"> <img src="https://img.shields.io/badge/AJAX-0088CC?style=for-the-badge&logo=&logoColor=white"> <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">  <img src="https://img.shields.io/badge/h2-4479A1?style=for-the-badge&logo=h2&logoColor=white"> <img src="https://img.shields.io/badge/ubuntu-e95420?style=for-the-badge&logo=ubuntu&logoColor=white"> <img src="https://img.shields.io/badge/Thymeleaf-%23005C0F.svg?style=for-the-badge&logo=Thymeleaf&logoColor=white"> <img src="https://img.shields.io/badge/stomp-000000?style=for-the-badge&logo=stomp&logoColor=white">
<br />
<img src="https://img.shields.io/badge/aws-232F3E?style=for-the-badge&logo=AmazonAWS&logoColor=white"> <img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white"> <img src="https://img.shields.io/badge/AWS%20RDS-%23527FFF.svg?style=for-the-badge&logo=amazon-rds&logoColor=white"> <img src="https://img.shields.io/badge/Route53-4053d6?style=for-the-badge&logo=amazonaws&logoColor=white">
<br />
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=for-the-badge&logo=GitHub Actions&logoColor=white"> <img src="https://img.shields.io/badge/bootstrap-%23563D7C.svg?style=for-the-badge&logo=bootstrap&logoColor=white">
</div>

## ****💡 ERD****
[ERD](https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/erd%EC%8B%A4%EC%A0%84.png)<br><br>




## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  프로젝트 상세****

#### ✅ 게시 글 작성

<img src="https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/picboy_1.gif" width="600"/><br>
-제시어를 선택하고(선택 안해도 됨) 첫 번째 그림을 그려봅시다.<br>
-움짤로 만들어질 그림들의 개수도 정해 보아요.<br>
<br>
<br>
<br>
<br>

#### ✅ 이어 그리기 참여
<img src="https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/picboy_2.gif" width="600"/><br>
-진행 중인 게시 글에 이어 그리기 참여를 해봅시다.<br>
-가장 마지막에 그려진 그림을 보고 다음 상황을 예측해서 그려봅니다.<br>
<br>
<br>
<br>
<br>

#### ✅ 완성된 움짤 감상하기

<img src="https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/picboy_3.gif" width="600"/><br>
-정해진 그림 개수에 도달하여 움짤로 만들어진 게시 글을 감상해 봅시다.<br>
-재밌게 잘 만들어진 움짤도 저장해 보세요.<br>
<br>
<br>
<br>
<br>


<img src="https://doker-bucket.s3.ap-northeast-2.amazonaws.com/GITHUB+README+%EC%9D%B4%EB%AF%B8%EC%A7%80/picboy_4.gif" width="600"/><br>



<br>

## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  기술적 의사 결정****

|사용기술|설명|
|---|---|
|CDN|AWS 의 CloudFront 를 사용하였습니다. 메모리 캐싱을 이용하여 웹 로딩속도를 크게 개선할 수 있었습니다. 이미지를 다루는 서비스 이다 보니 여러 이미지들을 렌더링 할때 해당 기술이 로딩 속도에 핵심이 되었습니다.|
|MySQL|각 유저에게 해당하는 자신이 직접 만든 게시물이나 다른 사람의 게시물에 참여한 그림이 포함되는 등 관계에 대한 효율 적인 서버관리를 위하여 관계형 DB를 선택하였습니다.|
|Web Socket|실시간으로 알람을 준다는 점에 착안하여 웹소켓의 스톰프를 사용하게 되었습니다. 추후, 공지사항과 같은 내용을 전달하기 위해 SSE가 아닌 웹소켓을 사용하게 되었습니다.|
|Github Action|협업 과정에서 변경 내용을 적용할 때 서버를 자동배포 함으로써 협업 절차를 좀 더 편하게 할 수 있어 사용되었습니다.|
|Https|DDos 등 서버 공격에 대한 보안을 위해서 프론트와 백 서버 모두 SSL 인증서를 통한 Https 를 적용하였습니다.|
|Redux-toolkit|코드의 상태 관리를 효율적으로 관리할 수 있는 방법이 필요했고, 필요한 정보들을 중앙화시키며, 단방향의 흐름으로 버그를 쉽게 예측할 수 있다는 점을 고려한 리덕스를 선택했고, 보일러 플레이트가 많은 리덕스의 단점을 보완하기 위해 리덕스 툴킷을 채택하게 되었습니다.|
|ContextAPI|전역적으로 관리할 필요가 없는 모달창과 같은 경우는 전역 스토어에 넣어 코드 관리하는 것보다 다른 효율적인 방법을 고민하였습니다.그리고 자주 변하지 않는 간단한 상태 정보만 전달하는 경우, application의 극히 일부 state만 전달하지만 props로 넘기는 단계가 너무 많을 때에 유용한 ContextAPI를 이용하여 모딜창을 띄워주었습니다.또한 ContextAPI는 하나의 데이터만 변경하여도 Provider로 감싼 모든 자식 컴포넌트에서 리랜더링이 일어나는 단점이 있는데 이 부분은 useMemo hook을 사용하여 불필요한 리랜더링을 방지하였습니다.|
|Styled-Component|스타일 도구 방법(css-in-js, css ,sass) 중 styled-component(css-in-js)는 컴포넌트화로 스타일 시트의 파일을 유지보수 할 필요가 없고, javascript와 css 사이의 상수와 함수를 쉽게 공유, props를 활용한 조건부 스타일링이 가능하며, 재사용성이 강하고, 유니크한 클래스를 자동으로 생성하기 때문에 코드 경량화의 강점이 있기 때문에 사용하게 되었습니다.|



<br>
<br>
<br>
<br>




## ****<img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  트러블 슈팅****
<details>
<summary> <b>휴대폰 인증</b> </summary>
<br>

- 문제점 :

부적절한 게시 글을 지속적으로 올리는 불량 유저를 막아야 했습니다.
계정 자체를 삭제하는 방법을 생각해봤는데 결국은 다시 회원 가입을 하면 그만 이었습니다.
그래서 선택한 것이 유저 테이블에 상태 값을 줘서, 불량 유저의 경우에는 해당하는 상태값을 적용함으로써 서비스를 이용하지 못하게 막는 것 이었습니다. 하지만 이 방법도 결국에는 다른 계정으로 회원 가입 해버리면 그만 이었습니다.

- 가정 :

따라서 계정에 유니크한 값을 주는 쪽으로 생각을 했는데, 첫 번째로 이메일 인증, 두 번째로 휴대폰 인증 이었습니다.
적용하기 쉬운 이메일 인증을 생각했으나, 유저 입장에서 회원 가입 할 때 입력한 메일에 들어가서 인증 번호를 받아오는 번거로움이 있으면 접근하기 귀찮을 것이라는 판단과 멘토님의 멘토링을 참고하여 휴대폰 인증을 적용하기로 했습니다.

- 결과 :

사실 휴대폰 인증도 결국엔 휴대폰으로 오는 인증번호를 다시 입력해야하는 절차가 있어서 귀찮은 것은 마찬가지 였습니다. 그래도 이메일보다도 휴대폰이 좀 더 접근하기 편했고 해당 휴대폰 번호로는 더 이상 새로운 계정을 만들 수 없기 때문에 부적절한 행위를 하는 계정을 통제하기도 매우 쉬워졌습니다.
</details>


<details>
<summary> <b>Query</b> </summary>
<br>

- 문제점 :
  JPA 기본 쿼리를 사용했었습니다. 간단한 조회를 할 때에는 분명 편리했는데 서비스 기능들을 구현하는 과정에서 JPA 기본 제공 쿼리 만으로는 구현하기 까다로운 문제에 봉착했습니다. 성능 개선을 위해서 DB 조회 방식도 지금처럼 해서는 안되며 조회 방식에도 구현하고자 하는 기능을 구현하기에는 한계가 있다고 판단했습니다.

- 가정 :
  조회 방식을 직접 쿼리문을 작성하여 가져오게 되면  DB 에서 꺼내올 때도 전부 불러와서 필터링 할 때 보다도 성능 개선이 있으며 무엇보다도 JPA 기본 쿼리로는 구현하기 까다로운 조건의 조회도 입맛대로 골라서 구현할 수 있어서 QueryDSL 을 사용하게 되었습니다.

- 결과 :
  우선 예상 외로 코드 리팩토링이 되었습니다. 기본 조회 부분은 카테고리 따위의 필터로 조건 조회를 걸게 되어서 JPA 기본 쿼리도 조건마다 하나씩 들어감으로써 중복되는 코드들이 반복적으로 나타났었는데 QueryDSL 을 사용하여 직접 쿼리문을 작성하게 되니까 기존에 조회를 담당하던 Service 클래스를 쓰지 않아도 될 정도로 압축 되었습니다.
  페이지네이션을 활용한 무한 스크롤을 적용하였기 때문에 한번에 데이터를 보내줄 때 리스트의 량이 작은 단위로 나눠져 있기 때문에 애초에 성능 개선이 눈에 띄게 올라가지는 않았지만 사용자가 많아져서 트래픽이 증가하게 될 경우에는 이 작은 성능 개선 만으로도 서비스 전반적으로 큰 차이를 보일 것이라고 판단했습니다.
  마지막으로 주요 논점 이었던 복잡한 조건의 조회를 깔끔하게 해결할 수 있었습니다.
</details>


<details>
<summary> <b>Transactional</b> </summary>
<br>

- 문제점 :

6 프레임이 설정된 게시물에 현재 5개의 그림만 그려져 있을 때, 마지막 6번째 그림을 그려서 이어 그리기 참여를 누르게 될 때 문제가 발생했습니다.
참여 버튼을 여러 번 누르게 되면 DB에 여러 장의 사진이 들어가게 되었습니다.

- 가정 :

첫 번째로는 처음 버튼을 누르게 되면 버튼을 잠가서 다시 버튼을 누르지 못하게 하는 방법을 생각했습니다.
두 번째로는 애초에 DB 를 잠구는 방법을 생각했습니다.

- 결과 :

프론트 수준에서 버튼을 잠갔을 때는 문제점이, 여러 사람이 마지막 그림을 동시에 클릭하게 되면 어쨌든 DB에 동시에 들어가는 것은 막을 수 없었습니다.
그래서 테이블의 해당 열을 잠구는 식으로 해결 했습니다. 다만 이 경우에도 여러 번 클릭을 했을때 DB에는 하나만 들어가지만 유저가 받는 알림 메세지가 중복 해서 나오는 것은 막을 수 없었습니다. 해당 이슈는 프론트 에서 중복 알림을 막아 주는 것으로 해결했습니다.
</details>


<details>
<summary> <b>CDN</b> </summary>
<br>

- 문제점:
  1. 재배포를 해야할 때 S3 버킷 내용을 변경하여도 캐시가 유지되는 시간내에는 해당 변경내용이 바로 반영되지 않았습니다.
  2. 배포된 사이트에서 페이지 이동시마다 404발생하는 문제가 생겼습니다

- 가정 :
  1. 이전 캐시가 유지되는 것을 끊고 새롭게 시작해야한다라는 방법을 생각하였습니다.
  2. local에서 실행시에는 404가 뜨지 않았기에 S3와 CDN문제로 인지하였고 S3에서 Base가 되는 URL을 단 하나인 index.html로 재설정하는 방법 하나와, 구글링을 통해 CDN에서의 오류메세지 처리를 알게 되었습니다.

- 결과 :
  1. CDN에서 무효화를 진행하여 Edge Location에 저장된 캐시를 초기화 시켜주었습니다.
  2. S3서버와 SPA가 가진 특성으로 navigate로 주소 변경시마다 SPA소스는 모든 페이지에 대한 정보를 미리 알고 있지만 서버는 해당 주소를 모르기에 뜨는 문제였습니다. 그렇기에 CDN 오류메시지 처리를 하여  404가 뜰 때 응답코드를 바꿔주는 방법으로 해결하였습니다.
</details>

<br>
<br>
<br>
<br>

## <img src="https://user-images.githubusercontent.com/98306332/193816813-16147c60-328d-4658-9cf0-dc7b291ffdfd.png" width="25" margin="auto"/>  REPOSITORIES

- FRONT-END

[GitHub - Project](https://github.com/BE-Project-team-one/picboy-FE)<br><br>


- BACK-END

[GitHub - Project](https://github.com/BE-Project-team-one/picboy)
